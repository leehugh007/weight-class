<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>減重班簽到系統</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ 引入 Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.5.0/firebase-database.js"></script>

    <!-- ✅ 初始化 Firebase -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
          const firebaseConfig = {
              apiKey: "AIzaSyDffz_ikeyugvTxZMRNwaO-31iRCZkJUoA",
              authDomain: "artemis-weight-class.firebaseapp.com",
              projectId: "artemis-weight-class",
              storageBucket: "artemis-weight-class.appspot.com",
              messagingSenderId: "591342091914",
              appId: "1:591342091914:web:a35ea1de392e848961f773",
              measurementId: "G-HW01886DST",
              databaseURL: "https://artemis-weight-class-default-rtdb.asia-southeast1.firebasedatabase.app/"
          };
          
          try {
              const app = firebase.initializeApp(firebaseConfig);
              const database = firebase.database();
              console.log("✅ Firebase 已正確初始化！");

              // 將 Firebase 資料庫物件存在全域變數中
              window.firebaseDatabase = database;

              // 確認 Firebase Database 是否正常
              if (!window.firebaseDatabase) {
                  console.error("❌ Firebase 資料庫物件無法載入！");
                  alert("Firebase 資料庫載入錯誤！請檢查設定！");
              } else {
                  console.log("✅ Firebase 資料庫已成功載入！");
                  // 確認初始化後載入 script.js
                  const scriptTag = document.createElement('script');
                  scriptTag.src = 'script.js';
                  document.body.appendChild(scriptTag);
              }
          } catch (error) {
              console.error("❌ Firebase 初始化失敗：", error);
              alert("Firebase 資料庫初始化失敗！請確認你的設定！");
          }
      });
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">🏋️‍♀️ 減重班簽到系統</h1>

        <div class="mb-4 text-center">
            <input type="text" id="nameInput" class="form-control mb-2" placeholder="請輸入你的名字" style="max-width: 300px; margin: auto;">
            <input type="date" id="dateInput" class="form-control mb-2" style="max-width: 300px; margin: auto;">
            <button id="signinBtn" class="btn btn-primary mb-2">簽到</button>
        </div>

        <div id="message" class="alert alert-success" style="display: none;"></div>
    </div>
</body>
</html>