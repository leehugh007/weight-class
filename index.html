<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>減重班簽到系統</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ 使用 `compat` 版本 (正確引入方式) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>

    <!-- ✅ 初始化 Firebase -->
    <script>
      window.addEventListener('load', () => {
          const firebaseConfig = {
              apiKey: "AIzaSyDffz_ikeyugvTxZMRNwaO-31iRCZkJUoA",
              authDomain: "artemis-weight-class.firebaseapp.com",
              projectId: "artemis-weight-class",
              storageBucket: "artemis-weight-class.appspot.com",
              messagingSenderId: "591342091914",
              appId: "1:591342091914:web:a35ea1de392e848961f773",
              measurementId: "G-HW01886DST",
              databaseURL: "https://artemis-weight-class-default-rtdb.asia-southeast1.firebasedatabase.app/"
          };
          
          try {
              console.log("🔥 正在嘗試初始化 Firebase...");
              const app = firebase.initializeApp(firebaseConfig);
              const database = firebase.database();

              if (database) {
                  console.log("✅ Firebase 已正確初始化！");
                  window.firebaseDatabase = database;

                  const scriptTag = document.createElement('script');
                  scriptTag.src = 'script.js?v=' + new Date().getTime();
                  document.body.appendChild(scriptTag);
              } else {
                  console.error("❌ Firebase 資料庫載入失敗！");
                  alert("Firebase 資料庫載入失敗！請確認 Firebase 設定。");
              }
          } catch (error) {
              console.error("❌ Firebase 初始化失敗：", error);
              alert("Firebase 資料庫初始化失敗！請確認你的設定！");
          }
      });
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">🏋️‍♀️ 減重班簽到系統</h1>

        <div class="mb-4 text-center">
            <input type="text" id="nameInput" class="form-control mb-2" placeholder="請輸入你的名字" style="max-width: 300px; margin: auto;">
            <input type="date" id="dateInput" class="form-control mb-2" style="max-width: 300px; margin: auto;">
            <button id="signinBtn" class="btn btn-primary mb-2">簽到</button>
        </div>

        <div id="message" class="alert alert-success" style="display: none;"></div>
    </div>
</body>
</html>